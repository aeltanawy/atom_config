!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("vega-util"),require("d3-time"),require("d3-array"),require("d3-scale"),require("d3-interpolate")):"function"==typeof define&&define.amd?define(["exports","vega-util","d3-time","d3-array","d3-scale","d3-interpolate"],a):a((e=e||self).vega={},e.vega,e.d3,e.d3,e.d3,e.d3)}(this,function(e,a,c,f,d,n){"use strict";function b(e,a,c){var f=e-a+2*c;return e?f>0?f:1:0}const t="identity",r="linear",i="log",u="pow",o="sqrt",l="symlog",s="time",g="utc",p="sequential",m="diverging",h="quantile",v="quantize",y="threshold",w="ordinal",q="point",M="band",S="bin-ordinal";function k(e){return e&&e.startsWith(p)}function O(e){return e&&e.startsWith(m)}var G={millisecond:c.timeMillisecond,second:c.timeSecond,minute:c.timeMinute,hour:c.timeHour,day:c.timeDay,week:c.timeWeek,month:c.timeMonth,year:c.timeYear},R={millisecond:c.utcMillisecond,second:c.utcSecond,minute:c.utcMinute,hour:c.utcHour,day:c.utcDay,week:c.utcWeek,month:c.utcMonth,year:c.utcYear};function x(){var e,a,c=d.scaleOrdinal().unknown(void 0),n=c.domain,t=c.range,r=[0,1],i=!1,u=0,o=0,l=.5;function s(){var c=n().length,d=r[1]<r[0],s=r[d-0],g=r[1-d],p=b(c,u,o);e=(g-s)/(p||1),i&&(e=Math.floor(e)),s+=(g-s-e*(c-u))*l,a=e*(1-u),i&&(s=Math.round(s),a=Math.round(a));var m=f.range(c).map(function(a){return s+e*a});return t(d?m.reverse():m)}return delete c.unknown,c.domain=function(e){return arguments.length?(n(e),s()):n()},c.range=function(e){return arguments.length?(r=[+e[0],+e[1]],s()):r.slice()},c.rangeRound=function(e){return r=[+e[0],+e[1]],i=!0,s()},c.bandwidth=function(){return a},c.step=function(){return e},c.round=function(e){return arguments.length?(i=!!e,s()):i},c.padding=function(e){return arguments.length?(o=Math.max(0,Math.min(1,e)),u=o,s()):u},c.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s()):u},c.paddingOuter=function(e){return arguments.length?(o=Math.max(0,Math.min(1,e)),s()):o},c.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),s()):l},c.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var c,d,b,i=+e[0],u=+e[1],o=r[1]<r[0],l=o?t().reverse():t(),s=l.length-1;if(i==i&&u==u&&(u<i&&(b=i,i=u,u=b),!(u<l[0]||i>r[1-o])))return c=Math.max(0,f.bisectRight(l,i)-1),d=i===u?c:f.bisectRight(l,u)-1,i-l[c]>a+1e-10&&++c,o&&(b=c,c=s-d,d=s-b),c>d?void 0:n().slice(c,d+1)}},c.invert=function(e){var a=c.invertRange([e,e]);return a?a[0]:a},c.copy=function(){return x().domain(n()).range(r).round(i).paddingInner(u).paddingOuter(o).align(l)},s()}var B=Array.prototype.map;function P(e){return B.call(e,function(e){return+e})}var D=Array.prototype.slice;function I(e,c){return arguments.length>1?(L[e]=function(e,a){return function(){var c=a();return c.invertRange||(c.invertRange=c.invert?function(e){return function(a){var c,f=a[0],d=a[1];return d<f&&(c=f,f=d,d=c),[e.invert(f),e.invert(d)]}}(c):c.invertExtent?function(e){return function(a){var c,f,d,n,b=e.range(),t=a[0],r=a[1],i=-1;for(r<t&&(f=t,t=r,r=f),d=0,n=b.length;d<n;++d)b[d]>=t&&b[d]<=r&&(i<0&&(i=d),c=d);if(!(i<0))return t=e.invertExtent(b[i]),r=e.invertExtent(b[c]),[void 0===t[0]?t[1]:t[0],void 0===r[1]?r[0]:r[1]]}}(c):void 0),c.type=e,c}}(e,c),this):a.hasOwnProperty(L,e)?L[e]:void 0}var L={[t]:d.scaleIdentity,[r]:d.scaleLinear,[i]:d.scaleLog,[u]:d.scalePow,[o]:d.scaleSqrt,[l]:d.scaleSymlog,[s]:d.scaleTime,[g]:d.scaleUtc,[p]:d.scaleSequential,[p+"-"+r]:d.scaleSequential,[p+"-"+i]:d.scaleSequentialLog,[p+"-"+u]:d.scaleSequentialPow,[p+"-"+o]:d.scaleSequentialSqrt,[p+"-"+l]:d.scaleSequentialSymlog,[m+"-"+r]:d.scaleDiverging,[m+"-"+i]:d.scaleDivergingLog,[m+"-"+u]:d.scaleDivergingPow,[m+"-"+o]:d.scaleDivergingSqrt,[m+"-"+l]:d.scaleDivergingSymlog,[h]:d.scaleQuantile,[v]:d.scaleQuantize,[y]:d.scaleThreshold,[S]:function e(){var c=[],n=[];function b(e){return null==e||e!=e?void 0:n[(f.bisect(c,e)-1)%n.length]}return b.domain=function(e){return arguments.length?(c=P(e),b):c.slice()},b.range=function(e){return arguments.length?(n=D.call(e),b):n.slice()},b.tickFormat=function(e,f){return d.tickFormat(c[0],a.peek(c),null==e?10:e,f)},b.copy=function(){return e().domain(b.domain()).range(b.range())},b},[w]:d.scaleOrdinal,[M]:x,[q]:function(){return function e(a){var c=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,a.copy=function(){return e(c())},a}(x().paddingInner(1))}};for(var T in L)I(T,L[T]);const C=["clamp","base","constant","exponent"];function F(e,a,c){return n.piecewise(j(a||"rgb",c),e)}function j(e,a){var c=n[function(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}(e)];return null!=a&&c&&c.gamma?c.gamma(a):c}function z(e){for(var a=e.length/6|0,c=new Array(a),f=0;f<a;)c[f]="#"+e.slice(6*f,6*++f);return c}function Q(e,a){for(let c in e)Y(c,a(e[c]))}const W={};function Y(e,a){return e=e&&e.toLowerCase(),arguments.length>1?(W[e]=a,this):W[e]}Q({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},z),Q({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>F(z(e))),Object.defineProperty(e,"scaleImplicit",{enumerable:!0,get:function(){return d.scaleImplicit}}),Object.defineProperty(e,"tickFormat",{enumerable:!0,get:function(){return d.tickFormat}}),e.Band=M,e.BinOrdinal=S,e.Diverging=m,e.Identity=t,e.Linear=r,e.Log=i,e.Ordinal=w,e.Point=q,e.Pow=u,e.Quantile=h,e.Quantize=v,e.Sequential=p,e.Sqrt=o,e.Symlog=l,e.Threshold=y,e.Time=s,e.UTC=g,e.bandSpace=b,e.interpolate=j,e.interpolateColors=F,e.interpolateRange=function(e,c){var f=c[0],d=a.peek(c)-f;return function(a){return e(f+a*d)}},e.isContinuous=function(e){switch(e){case r:case i:case u:case o:case l:case s:case g:case p:return!0}return!1},e.isDiscrete=function(e){return e===S||e===w||e===M||e===q},e.isDiscretizing=function(e){return e===S||e===h||e===v||e===y},e.isDiverging=O,e.isInterpolating=function(e){return k(e)||O(e)},e.isLogarithmic=function(e){return e===i||e.endsWith("-log")},e.isQuantile=function(e){return e===h},e.isSequential=k,e.isTemporal=function(e){return e===s||e===g},e.isValidScaleType=function(e){switch(e){case t:case r:case i:case u:case o:case l:case s:case g:case p:case h:case v:case y:case w:case q:case M:case S:return!0}return!1},e.quantizeInterpolator=function(e,a){for(var c=new Array(a),f=a+1,d=0;d<a;)c[d]=e(++d/f);return c},e.scale=I,e.scaleCopy=function(e){const a=e.type,c=e.copy();return c.type=a,c},e.scaleFraction=function(e,c,f){var d,n,b,t=f-c;return t&&isFinite(t)?(d=(n=e.type).indexOf("-"),n=d<0?n:n.slice(d+1),b=I(n)().domain([c,f]).range([0,1]),C.forEach(a=>e[a]?b[a](e[a]()):0),b):a.constant(.5)},e.scheme=Y,e.timeInterval=function(e,c){const f=c===g?R:G;return a.hasOwnProperty(f,e)&&f[e]},Object.defineProperty(e,"__esModule",{value:!0})});